<!DOCTYPE html>

<link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="content-type" content="text/html; charset=utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

<meta property="og:title" content="Unresolved">
<meta property="og:type" content="website">
<meta property="og:url" content="http://yet.unresolved.xyz/">


<meta property="og:image" content="http://yet.unresolved.xyz/images/octopress.png">


<meta property="og:site_name" content="Unresolved">

<title>
    
    OctopressのサイドバーにGravatarを表示させる &middot; Unresolved
    
</title>


<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/solarized_dark.min.css">
<link rel="stylesheet" href="/css/poole.css">
<link rel="stylesheet" href="/css/syntax.css">
<link rel="stylesheet" href="/css/lanyon.css">
<link rel="stylesheet" href="/css/styles.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/assets/favicon.ico">


<link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>

<script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<div class="wrap">
    <div class="masthead">
        <div class="container">
            <h3 class="masthead-title">
                <a href="/" title="Home">Unresolved</a>
                <small></small>
            </h3>
        </div>
    </div>

    <div class="container content">


<div class="post post-single">
    <span class="post-date">Sat, Sep 20, 2014</span>
    <h1 class="post-title">OctopressのサイドバーにGravatarを表示させる</h1>

    <div class="eyecatch">
        
        <img src="/images/octopress.png" alt="OctopressのサイドバーにGravatarを表示させる">
        
    </div>

    

<h2 id="octopressのサイドバーってどうなってんの:c73b8990ae6ff308f2649661fb572fc8">Octopressのサイドバーってどうなってんの？</h2>

<p>そもそもOctopressの構成がまだよくわかってないのでそこから勉強しよう。</p>

<p>どうやらデフォルトで準備されてるサイドバーはここに格納されているらしい。</p>

<pre><code class="language-sh">octopress git:(source)$ ls source/_includes/asides/
delicious.html    github.html       googleplus.html   pinboard.html     recent_posts.html
</code></pre>

<p>で、自分で作りたい場合はここに格納するっぽい。</p>

<pre><code class="language-sh">octopress git:(source)$ ls source/_includes/custom/asides
about.html   twitter.html
</code></pre>

<p>って<code>_config.yml</code>に書いてあった。</p>

<pre><code class="language-yml"># list each of the sidebar modules you want to include, in the order you want them to appear.
# To add custom asides, create files in /source/_includes/custom/asides/ and add them to the list like 'custom/asides/custom_aside_name.html'
default_asides: [custom/asides/about.html, asides/recent_posts.html, custom/asides/twitter.html]
</code></pre>

<h2 id="gravatarの情報って持って来れるの:c73b8990ae6ff308f2649661fb572fc8">Gravatarの情報って持って来れるの？</h2>

<p>ちょっとだけ調べてみたらGravatarの画像だけ持ってくるpluginは用意されてるっぽい。</p>

<p>でもどうせなら自己紹介のところとかも欲しいよね。</p>

<p>で、Gravatarに<a href="https://ja.gravatar.com/site/implement/">開発者向け資料</a>がありました。</p>

<p>しっかり読んでないけど、<a href="https://ja.gravatar.com/site/implement/profiles/json/">JSONで返せるっぽい</a>からこれを使えばいいかな。</p>

<p>ハッシュを指定する必要があるみたいなので、公式から取得しとく。</p>

<h2 id="作るぞ:c73b8990ae6ff308f2649661fb572fc8">作るぞ</h2>

<p>なんか最初から<code>source/_include/custom/asides</code>に<code>about.html</code>ってのがあるし、これにプロフィールを書こうかな。</p>

<p>まず取得したハッシュを<code>_config.yml</code>に定義しちゃおう。</p>

<pre><code class="language-ruby"># Gravatar
gravatar_hash: 1e092e9f2cda827deb8623be2e846936
</code></pre>

<p>で、<code>about.html</code>からハッシュを参照してJSONを取得しよう。</p>

<pre><code class="language-html">&lt;section id=&quot;about&quot; style=&quot;display: none;&quot;&gt;
    &lt;h1&gt;About Me&lt;/h1&gt;
    &lt;br /&gt;
    &lt;img id=&quot;photo&quot;&gt;
    &lt;br /&gt;
    &lt;div id=&quot;displayname&quot;&gt;&lt;/div&gt;
    &lt;br /&gt;
    &lt;div id=&quot;aboutme&quot;&gt;&lt;/div&gt;
    &lt;div id=&quot;currentlocation&quot;&gt;&lt;/div&gt;
    &lt;br /&gt;
    &lt;div id=&quot;urls&quot;&gt;&lt;/div&gt;
&lt;/section&gt;
&lt;script&gt;
    $(function() {
        var url = &quot;https://ja.gravatar.com/{% raw %}{{ site.gravatar_hash }}{% endraw %}.json?callback=?&quot;;
        $.getJSON(url)
            .done(function(data) {
                var entry = data.entry[0];
                $(&quot;#photo&quot;).attr(&quot;src&quot;, entry.photos[0].value);
                $(&quot;#displayname&quot;).html(entry.displayName);
                $(&quot;#aboutme&quot;).html(entry.aboutMe);
                // $(&quot;#currentlocation&quot;).html(entry.currentLocation);
                entry.urls.forEach(function(el){
                    $(&quot;#urls&quot;).append($(&quot;&lt;a href='&quot; + el.value + &quot;'&gt;&quot; + el.title + &quot;&lt;/a&gt;&lt;br /&gt;&quot;));
                });

                $(&quot;#about&quot;).show();
            });
    });
&lt;/script&gt;
</code></pre>

<p>あとはCSSにちょちょいとスタイルをつけるだけ。</p>

<p>独自のスタイルは<code>.themes/classic/sass/custom/_styles.scss</code>に書けばいいぽい。</p>

<p>SASSとかも頃合い見て勉強しなきゃいけないかな・・・。</p>

<pre><code class="language-css">img#photo {
    display: block;
    margin: auto;
}

div#displayname {
    text-align: center;
    font-weight: bold;
}

div#aboutme {
}

div#currentlocation {
    text-align: center;
}

div#urls {
    text-align: center;
}
</code></pre>

<p>とりあえず表示出来たからここまででいいや。</p>

<p>ついでに自分用のtheme作っちゃったから、ある程度整備出来たらgithubにあげよっかな。</p>

<h2 id="参考にさせて頂きました:c73b8990ae6ff308f2649661fb572fc8">参考にさせて頂きました</h2>

<p><a href="http://blog.awairo.net/blog/2013/12/24/octopress-aside-of-getting-profile-from-gravatar/">Gravatarのプロフィールを表示するOctopressのサイドバー</a></p>


    
    <ul class="post-categories">
        
        <li>
            <a href="http://yet.unresolved.xyz/categories/gravatar">
                <i class="fa fa-tags"></i>
                gravatar
            </a>
        </li>
        
        <li>
            <a href="http://yet.unresolved.xyz/categories/octopress">
                <i class="fa fa-tags"></i>
                octopress
            </a>
        </li>
        
    </ul>

    
    <hr>
    <h3>関連する投稿</h3>
    <ul class="related-post">
        
        
        
        
        
        
        <li><a href="http://yet.unresolved.xyz/blog/2015/01/04/migrate-blog-to-hugo-from-octopress/">ブログをOctopressからHugoに移行した</a></li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li><a href="http://yet.unresolved.xyz/blog/2014/11/12/pass-the-validation-of-w3c/">OctopressをW3Cのバリデーションにパスさせる</a></li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li><a href="http://yet.unresolved.xyz/blog/2014/10/22/move-sidebar-at-under-the-article/">Octopressのサイドバーを下部に移動する</a></li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li><a href="http://yet.unresolved.xyz/blog/2014/09/21/description-is-not-set/">_config.ymlに書いたdescriptionが設定されない</a></li>
        
        
        
        
        
        <li><a href="http://yet.unresolved.xyz/blog/2014/09/21/make-new-theme-flatten/">Octopressのテーマを作ってみる</a></li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li><a href="http://yet.unresolved.xyz/blog/2014/09/17/install-the-octopress-on-github-pages/">GitHub PagesにOctopressをのっけてみる</a></li>
        
        
    </ul>

    
    <div class="move">
        <div class="prev">
            
            <a href="http://yet.unresolved.xyz/blog/2014/09/21/make-new-theme-flatten/">
                <i class="fa fa-chevron-left"></i>
                Octopressのテーマを作ってみる
            </a>
            
        </div>
        <div class="next">
            
            <a href="http://yet.unresolved.xyz/blog/2014/09/20/git-on-proxy/">
                gitのリポジトリ単位にproxyの設定をする
                <i class="fa fa-chevron-right"></i>
            </a>
            
        </div>
    </div>

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
 
var disqus_shortname = 'unresolved'; 

 
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>


    </div>
</div>



<div id="aboutme">
    <div class="container">
        <div class="eyecatch">
            <img id="photo" src="/images/nopicture.png" alt="profile">
        </div>
        <div class="data">
            <span class="post-date">Sun, Feb 26, 1989</span>
            <h1 id="username" class="post-title"></h1>
            
            <a href="https://www.facebook.com/daisuke.tsuji.735" target="_blank"><i class="fa fa-facebook-square"></i></a>
            
            
            <a href="https://twitter.com/dim0627" target="_blank"><i class="fa fa-twitter-square"></i></a>
            
            
            <a href="https://github.com/dim0627" target="_blank"><i class="fa fa-github-square"></i></a></p>
            
            <pre id="description" class="summary"></pre>
            <ul id="urls" class="post-categories"></ul>
        </div>

        <script>
$(function() {
    var url = "https://ja.gravatar.com/1e092e9f2cda827deb8623be2e846936.json?callback=?";
    $.getJSON(url)
        .done(function(data) {
            var entry = data.entry[0];
            $("#photo").attr("src", entry.photos[0].value);
            $("#username").html(entry.name.familyName + " " + entry.name.givenName);
            $("#description").html(entry.aboutMe);
            entry.urls.forEach(function(el){
                $("#urls").append($("<li><a href='" + el.value + "'>" + el.title + "</a></li>"));
            });

            $("#aboutme").show();
        });
});
        </script>

    </div>
</div>




<footer>
    <p>&copy; 2015 Daisuke Tsuji
    <p>Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55005303-1', 'auto');
  ga('send', 'pageview');

</script>

