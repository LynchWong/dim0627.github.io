<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sand Dance on Unresolved</title>
    <link>https://yet.unresolved.xyz/tags/sand-dance/</link>
    <description>Recent content in Sand Dance on Unresolved</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja-jp</language>
    <lastBuildDate>Mon, 28 Mar 2016 20:56:07 +0900</lastBuildDate>
    <atom:link href="https://yet.unresolved.xyz/tags/sand-dance/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>ハイディの魔法の英会話の件を可視化してみようじゃないか</title>
      <link>https://yet.unresolved.xyz/blog/2016/03/28/hyde-english-of-magic-and-sanddance/</link>
      <pubDate>Mon, 28 Mar 2016 20:56:07 +0900</pubDate>
      
      <guid>https://yet.unresolved.xyz/blog/2016/03/28/hyde-english-of-magic-and-sanddance/</guid>
      <description>

&lt;p&gt;ひどい教授がいたもんですね。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://waranote.livedoor.biz/archives/48213295.html&#34;&gt;教授「この本買え アマゾンで星5つけろ」学生がamazonレビューで内情を暴露 : ワラノート&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;僕はこんな教授にあたらなくて良かったです。ところでこの本のレビューに以下のような投稿がありました。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ここには途轍もない量の★5レビューがあると思いますが、暇な人は、横軸に時間(単位は日)、縦軸に1日あたりに書かれた★5レビューの数として、ヒストグラムを取ってみると面白いと思います。(だいたい半年おきに、パルス的なレビュー数の鋭い極大が見られます)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;おお、確かに面白そうだ。やってみましょう。&lt;/p&gt;

&lt;h2 id=&#34;データを取る:70bc05286a8788b4334c382ea3838593&#34;&gt;データを取る&lt;/h2&gt;

&lt;p&gt;Amazonの商品情報はAPIとかがあるんですかね。ちょっと面倒なのでスクレイピングでやらせてください。
やりたいのは可視化なので、適当に書いちゃいますね。
標準出力に吐き出したものをリダイレクトでCSVにしちゃいましょう。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#!/usr/bin/env python
# -*- coding: utf-8 -*-

from bs4 import BeautifulSoup
import urllib
import urllib2
import time
import re

BASE_URL = &amp;quot;http://www.amazon.co.jp/product-reviews/4062179350&amp;quot;

def get_max_page_num():
    html = BeautifulSoup(urllib2.urlopen(BASE_URL + &amp;quot;/ref=cm_cr_dp_see_all_summary&amp;quot;).read(), &#39;lxml&#39;)
    return int(html.find_all(class_=&amp;quot;page-button&amp;quot;)[-1].string)

def get_comment_list(page_num):
    html = BeautifulSoup(urllib2.urlopen(BASE_URL + &amp;quot;/ref=cm_cr_arp_d_paging_btm_{0}?pageNumber={0}&amp;quot;.format(page_num)).read(), &#39;lxml&#39;)
    return html.find(id=&amp;quot;cm_cr-review_list&amp;quot;).find_all(class_=&amp;quot;review&amp;quot;)

def parse_comment_detail(comment):
    return {&amp;quot;date&amp;quot;: re.sub(u&amp;quot;\d+日&amp;quot;, &amp;quot;&amp;quot;, comment.find(class_=&amp;quot;review-date&amp;quot;).string),
            &amp;quot;rate&amp;quot;: comment.find(class_=&amp;quot;review-rating&amp;quot;).find(class_=&amp;quot;a-icon-alt&amp;quot;).string}

def wait():
    time.sleep(5)

max_page_num = get_max_page_num()
for i in range(max_page_num):
    wait()
    page_num = i + 1
    for comment in get_comment_list(page_num):
        parsed_comment = parse_comment_detail(comment)
        print(&amp;quot;{0},{1}&amp;quot;.format(parsed_comment[&amp;quot;date&amp;quot;].encode(&amp;quot;utf-8&amp;quot;), parsed_comment[&amp;quot;rate&amp;quot;].encode(&amp;quot;utf-8&amp;quot;)))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;こんな感じで取れます。ヘッダもつけておきましょう。
この時点ではただ吐き出しただけで何も集計していません。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-csv&#34;&gt;date,rate
2015年2月,5つ星のうち1.0
2014年6月,5つ星のうち1.0
2014年7月,5つ星のうち1.0
2016年3月,5つ星のうち1.0
2015年1月,5つ星のうち1.0
2016年3月,5つ星のうち1.0
2016年2月,5つ星のうち1.0
2016年3月,5つ星のうち1.0
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;可視化する:70bc05286a8788b4334c382ea3838593&#34;&gt;可視化する&lt;/h2&gt;

&lt;p&gt;何を使おうか迷ったんですが、僕はそもそも可視化とかあんまり詳しくないんですよね。
ただ、こないだマイクロソフト社から発表された&lt;a href=&#34;https://sanddance.azurewebsites.net/BeachPartyApp/BeachPartyApp.html&#34;&gt;SandDance&lt;/a&gt;というちょうどいいものがあるので、これを使ってみましょう。&lt;/p&gt;

&lt;p&gt;これは何かというと、CSVやらなんたらを乗っけると幾つかのパターンで可視化してくれるというものです。
ファセットも出来たりして便利なのですが、意外と可視化したいデータってなかったりするんですよね。&lt;/p&gt;

&lt;p&gt;前置きはおいておいて、取り込んでみましょう。
取り込んだ直後は&lt;code&gt;column&lt;/code&gt;という1つの軸の値の数を表示してくれます。これでいうと、月ごとのレビュー数ですね。&lt;/p&gt;

&lt;a href=&#34;https://yet.unresolved.xyz/images/2016-03-28/after_load.png&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;
  &lt;amp-img src=&#34;https://yet.unresolved.xyz/images/2016-03-28/after_load.png&#34; alt=&#34;after_load&#34; width=1057 height=644 layout=&#34;responsive&#34;&gt;&lt;/amp-img&gt;
&lt;/a&gt;


&lt;p&gt;これだと評価値がわからないので、評価ごとに色をつけてみましょう。&lt;/p&gt;

&lt;a href=&#34;https://yet.unresolved.xyz/images/2016-03-28/column_colored.png&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;
  &lt;amp-img src=&#34;https://yet.unresolved.xyz/images/2016-03-28/column_colored.png&#34; alt=&#34;column_colored&#34; width=1262 height=654 layout=&#34;responsive&#34;&gt;&lt;/amp-img&gt;
&lt;/a&gt;


&lt;p&gt;ピンクが評価5のものです。随分見やすくなりましたね。ほとんどが5評価なのがよくわかります。
どうやら2014年7月に1度大きな波が来て、その後2014年11月、2014年12月と大量に評価されているようです。&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;だいたい半年おきに、パルス的なレビュー数の鋭い極大が見られます&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;半年ごとではなかったですが、何か恣意的なものを感じるグラフなのは確かですね。&lt;/p&gt;

&lt;p&gt;ちなみに月ごとのファセット表示をするとこうなります。
&lt;a href=&#34;https://yet.unresolved.xyz/images/2016-03-28/column_facet.png&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;
  &lt;amp-img src=&#34;https://yet.unresolved.xyz/images/2016-03-28/column_facet.png&#34; alt=&#34;column_facet&#34; width=1251 height=646 layout=&#34;responsive&#34;&gt;&lt;/amp-img&gt;
&lt;/a&gt;

違った表示の仕方も出来たり。
&lt;a href=&#34;https://yet.unresolved.xyz/images/2016-03-28/density.png&#34; target=&#34;_blank&#34; rel=&#34;nofollow&#34;&gt;
  &lt;amp-img src=&#34;https://yet.unresolved.xyz/images/2016-03-28/density.png&#34; alt=&#34;density&#34; width=1393 height=649 layout=&#34;responsive&#34;&gt;&lt;/amp-img&gt;
&lt;/a&gt;

データによってはもっと面白い表示が出来そうですね。&lt;/p&gt;

&lt;p&gt;最後にCSVを貼っておくので、使いたい人がいたらどうぞ。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-csv&#34;&gt;date,rate
2015年02月,5つ星のうち1.0
2014年06月,5つ星のうち1.0
2014年07月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2015年01月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2016年02月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち2.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2014年10月,5つ星のうち3.0
2016年03月,5つ星のうち1.0
2016年03月,5つ星のうち1.0
2014年10月,5つ星のうち3.0
2013年08月,5つ星のうち3.0
2013年01月,5つ星のうち5.0
2012年10月,5つ星のうち5.0
2015年07月,5つ星のうち4.0
2013年05月,5つ星のうち5.0
2016年03月,5つ星のうち3.0
2014年08月,5つ星のうち4.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち4.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2014年07月,5つ星のうち4.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち4.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2013年12月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年01月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年06月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2013年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2013年06月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年06月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2013年06月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2013年06月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち4.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年07月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2016年03月,5つ星のうち4.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2014年11月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2014年12月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2015年03月,5つ星のうち5.0
2015年01月,5つ星のうち5.0
2015年07月,5つ星のうち5.0
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>
