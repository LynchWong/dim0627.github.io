<!DOCTYPE html>

<head>
<meta charset="utf-8">


<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">



<meta property="og:type" content="website">
<meta property="og:url" content="http://yet.unresolved.xyz">
<meta property="og:title" content="Unresolved">

<meta property="og:description" content="ちょっと友人と共同で開発しているWebアプリがあって、DBの用意も手軽に共有したいのでAnsibleでやることに。 まあオレはViewしか触ってないから別になくてもいいんだけど・・・。 hostsを書く Ansibleが取り扱うマシンの定義をしておかなきゃいけない。 Vagrantfileで作られる仮想マシンのipを固定して、 config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.20&quot; Ansibleに読み込ませるhostsに定義しよう。 [vagrant] 192.168.33.20 ansibleのsshがrefuseで止められる場合は、vagrant ssh-config &gt;&gt; ~/.ssh/configとかしておけば多分大丈夫。 Vagrantfileでプロビジョニング出来るようにする せっかくだしvagrant upかvagrant provisionでプロビジョニングしてほしい。 Vagrantfileにこんな感じの記述をすれば、初回実施時にAnsibleのPlaybookを実行してくれるらしい。 Ansibleはなんかコマンド覚えらんないしちょうどいいね。 config.vm.provision &quot;ansible&quot; do |ansible| ansible.playbook = &quot;env/dev-playbook.yml&quot; ansible.inventory_path = &quot;env/hosts&quot; ansible.limit = &#39;all&#39; end 今回はVagrantfileがあるディレクトリにenvってディレクトリを作って、そこに設定ファイルを置くことにした。 Playbookとかもここに入れていくよ。 Ansible Galaxyを使う AnsibleはPlaybookと呼ばれるymlファイルにプロビジョニングの定義をしていく。 でも、正直個人的に使う環境のためにガリガリ書くのはバカらしいよね。 特にMySQLなんて相当な数の人が使ってるだろうし、そのノウハウを使わせてもらいたい。 AnsibleにはAnsible GalaxyっていうWebサービスがあって、モジュール単位のよく使う定義をアップできるみたい。 Ansible Galaxy | Find, reuse, and share the best Ansible content AnsibleではMySQLやらhttpdやらの個々のモジュールをroleと呼んでるらしい。 つまり今回はMySQLのroleを探せばいい。 検索はBrowse Rolesから出来ます。 検索結果、デフォルトで評価の降順にしておいて欲しいんだけど・・・。 今回はANXS.mysqlという奴を使わせてもらうことにしました。 理由は、評価がそれなりに高くて、MySQLの設定等が見たまんまでやれそうだったから。 Ansible Galaxyからroleをインストールする Ansible Galaxyからの導入はansible-galaxy install ANXS.mysqlみたいにやれば出来る。 でもこれじゃあ、このPCにだけroleが導入されちゃうし、どんなroleが必要だったのか後々わからなくなっちゃうね。">

<meta property="og:image" content="http://yet.unresolved.xyz/images/ansible.png">



<meta property="og:site_name" content="Unresolved">
<meta name="google-site-verification" content="SLxungm5o9WvGwPUEGZCspbMBAsLBjOxAHNyjIBUuSI" />

<title>
    
    Unresolved
    
</title>


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_dark.min.css">
<link rel="stylesheet" href="http://yet.unresolved.xyz/css/base.css">
<link rel="stylesheet" href="http://yet.unresolved.xyz/css/styles.css">
<link rel="stylesheet" href="http://yet.unresolved.xyz/css/custom.css">


<link rel="shortcut icon" href="http://yet.unresolved.xyz/assets/favicon.ico">


<link rel="alternate" type="application/rss+xml" title="RSS" href="http://yet.unresolved.xyz/index.xml">
</head>



<div class="wrap">
    <div class="masthead">
        <div class="container">
            <h3 class="masthead-title">
                <a href="http://yet.unresolved.xyz" title="Home">Unresolved</a>
            </h3>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
        </div>
    </div>

    <div class="container content">




<div class="posts">
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/03/16/create-an-mysql-environment-using-the-ansible/"><img src="http://yet.unresolved.xyz/images/ansible.png" alt="Ansibleを使ってMySQLが動く環境を手っ取り早く作る"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Mon, Mar 16, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/03/16/create-an-mysql-environment-using-the-ansible/">Ansibleを使ってMySQLが動く環境を手っ取り早く作る</a></h1>
        <div class="summary">ちょっと友人と共同で開発しているWebアプリがあって、DBの用意も手軽に共有したいのでAnsibleでやることに。 まあオレはViewしか触ってないから別になくてもいいんだけど・・・。 hostsを書く Ansibleが取り扱うマシンの定義をしておかなきゃいけない。 Vagrantfileで作られる仮想マシンのipを固定して、 config.vm.network &quot;private_network&quot;, ip: &quot;192.168.33.20&quot; Ansibleに読み込ませるhostsに定義しよう。 [vagrant] 192.168.33.20 ansibleのsshがrefuseで止められる場合は、vagrant ssh-config &gt;&gt; ~/.ssh/configとかしておけば多分大丈夫。 Vagrantfileでプロビジョニング出来るようにする せっかくだしvagrant upかvagrant provisionでプロビジョニングしてほしい。 Vagrantfileにこんな感じの記述をすれば、初回実施時にAnsibleのPlaybookを実行してくれるらしい。 Ansibleはなんかコマンド覚えらんないしちょうどいいね。 config.vm.provision &quot;ansible&quot; do |ansible| ansible.playbook = &quot;env/dev-playbook.yml&quot; ansible.inventory_path = &quot;env/hosts&quot; ansible.limit = 'all' end 今回はVagrantfileがあるディレクトリにenvってディレクトリを作って、そこに設定ファイルを置くことにした。 Playbookとかもここに入れていくよ。 Ansible Galaxyを使う AnsibleはPlaybookと呼ばれるymlファイルにプロビジョニングの定義をしていく。 でも、正直個人的に使う環境のためにガリガリ書くのはバカらしいよね。 特にMySQLなんて相当な数の人が使ってるだろうし、そのノウハウを使わせてもらいたい。 AnsibleにはAnsible GalaxyっていうWebサービスがあって、モジュール単位のよく使う定義をアップできるみたい。 Ansible Galaxy | Find, reuse, and share the best Ansible content AnsibleではMySQLやらhttpdやらの個々のモジュールをroleと呼んでるらしい。 つまり今回はMySQLのroleを探せばいい。 検索はBrowse Rolesから出来ます。 検索結果、デフォルトで評価の降順にしておいて欲しいんだけど・・・。 今回はANXS.mysqlという奴を使わせてもらうことにしました。 理由は、評価がそれなりに高くて、MySQLの設定等が見たまんまでやれそうだったから。 Ansible Galaxyからroleをインストールする Ansible Galaxyからの導入はansible-galaxy install ANXS.mysqlみたいにやれば出来る。 でもこれじゃあ、このPCにだけroleが導入されちゃうし、どんなroleが必要だったのか後々わからなくなっちゃうね。</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/03/16/create-an-mysql-environment-using-the-ansible/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/03/16/provided-hosts-list-is-empty/"><img src="http://yet.unresolved.xyz/images/ansible.png" alt="Vagrant &#43; Ansibleでprovided hosts list is empty"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Mon, Mar 16, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/03/16/provided-hosts-list-is-empty/">Vagrant &#43; Ansibleでprovided hosts list is empty</a></h1>
        <div class="summary">AnsibleでVagrant上のCentOSにMySQLを入れようとしたらこれ。 PLAY [vagrant] **************************************************************** skipping: no hosts matched Vagrantfileにinventory_pathを指定しなきゃいけない。 config.vm.provision &quot;ansible&quot; do |ansible| ansible.playbook = &quot;env/dev-playbook.yml&quot; ansible.inventory_path = &quot;env/hosts&quot; end 次はこれ。 ERROR: provided hosts list is empty Ansible failed to complete successfully. Any error output should be visible above. Please fix these errors and try again. limitの指定も必要。 config.vm.provision &quot;ansible&quot; do |ansible| ansible.playbook = &quot;env/dev-playbook.yml&quot; ansible.inventory_path = &quot;env/hosts&quot; ansible.limit = 'all' end 参考にさせて頂きました Vagrant 1.5からAnsibleを使うのならlimit = &lsquo;all&rsquo;が必要 - 今日のハック</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/03/16/provided-hosts-list-is-empty/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/02/28/name-space-form-reconstructs-for-clojure/"><img src="http://yet.unresolved.xyz/images/clojure.png" alt="Slamhoundを使ってClojureのrequireを自動生成する"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Sat, Feb 28, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/02/28/name-space-form-reconstructs-for-clojure/">Slamhoundを使ってClojureのrequireを自動生成する</a></h1>
        <div class="summary">ちょっとVimとClojureの環境を整備したくて、こんなのを読んでました。 My Clojure Toolchain: Vim そもそも~/.lein/profiles.cljの存在を知らなくって、ちょっと色々書いてみることに。 leiningen/PROFILES.md at master · technomancy/leiningen サンプルはこんな感じ。 {:user {:plugins [[lein-pprint &quot;1.1.1&quot;]] :dependencies [[slamhound &quot;1.3.1&quot;]]}} lein-pprintは対象のLeiningenプロジェクトの情報を表示してくれるインスペクタみたいなもの。 いつ使うのだろうか。 slamhoundはClojureのrequireを自動生成してくれるもの。 今回はこれを導入してみる。 Slamhound + Vim Clojureのnsが書きづらいとは思わないけど、まあ面倒なのは確かなわけで自動生成してくれるならそれの方がいい。 SlamhoundはLeiningenから呼び出すことが出来て、こんな感じのclojureプログラムがあったとしたら、 (ns my.namespace &quot;I have a doc string.&quot;) (defn -main [&amp; args] (pprint args) (io/copy (ByteArrayInputStream. (.getBytes &quot;hello&quot;)) (first args))) こうやると $ lein slamhound src/my/namespace.clj nsのとこがこうなる。 (ns my.namespace &quot;I have a doc string.&quot; (:require [clojure.java.io :as io] [clojure.pprint :refer [pprint]]) (:import (java.io ByteArrayInputStream)))</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/02/28/name-space-form-reconstructs-for-clojure/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/02/14/make-task-manager-by-using-apigility/"><img src="http://yet.unresolved.xyz/images/apigility.png" alt="Apigility &#43; React.jsでタスク管理ツールを作ってみる"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Sat, Feb 14, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/02/14/make-task-manager-by-using-apigility/">Apigility &#43; React.jsでタスク管理ツールを作ってみる</a></h1>
        <div class="summary">これに行ってきました。 Zend 社技術者による最近の PHP 関連の取り組みご紹介 - Zendイベント管理 | Doorkeeper 英語辛かった。 PHP7やらZ Rayやらまあ気になるものはそれなりにあったんだけど、 その中でも触ってみようかなと思えるくらい興味を持てたApigilityを触ってみようと思います。 ついでなので使ってみたかったReact.jsも導入してみる。 Apigility？ API構築に特化したフレームワークらしい。 プレゼンテーションレイヤを完全に分離したアーキテクチャでの利用を想定しているんだと思う。 何が強いかって、DBさえ用意してしまえば後はGUIから操作するだけでAPIが作れてしまう。 DBも多分メジャーどころは大抵使える(と思う)し、APIもRPCはもちろん、RESTfulな設計にもバッチリ対応してるらしい。 今回は勉強も兼ねて、簡単なタスク管理ツールを作ってみます。 インストール このコマンドをべしっとやるだけで、カレントディレクトリにapigilityのディレクトリが切られる &amp; サーバまで起動する。 curl -sS https://apigility.org/install | php サーバを再度起動する場合はphp -S localhost:8888 -t public public/index.phpとかやればOK。 画面を開くとこんな感じのが出てくる。 ロゴがかわいいね。 ここからAPIの追加やデータベース接続の設定やらが出来ます。 データベースの準備 適当なものなので、SQLiteでやっちゃう。 テーブルはこんな感じで、名前と完了/未完了が持てるだけにしよう。 create table tasks(id integer primary key, name varchar(20), finished integer); Apigilityからデータベースにつなぐ SettingsのDatabase Adaptersから定義を追加出来る。 今回はこんな感じで設定。 APIを追加する APIsのCreate New APIからAPIを追加する。 今回はTasksという名前で作成した。 粒度がわかりづらいけど、ここで作ったAPIに対して個々のサービスを追加していく。 大分類みたいなものだと捉えればいいのかな？ サービスを追加する さっき作ったTasksAPIに、データベースのtasksテーブルとRESTで紐づくサービスを追加する。 サービスはRESTとRPCから選ぶことが出来て、 RPCを選ぶと自動生成されたPHPのコードに自分で処理を書いていく感じになるみたい。 んで指定したURLを叩くとその処理が呼ばれる、って感じ。 今回は単純にテーブルとURLをRESTfulに対応付けられればいいのでRESTにしてます。 というわけで、REST Service Nameをtasks、DB-Connectedはさっき作ったアダプタとテーブル名を設定。 こんな感じになる。 接続できるか試してみよう。 データがないので、まずはPOSTで格納してみる。 いけてるっぽい。 取得は？ おお！取れる！ もちろんSQLite側にも、 sqlite&gt; select * from tasks; 1|task1|false 入ってます。 ビューを作る サーバサイドがあまりにもサクッと終わっちゃったな・・・。 後は画面側を生のHTMLにして、取得と格納は全部JSに任せます。 つってもここはあんまり説明してもしょうがないのでSSとコードだけ。 そうですめんどくさくなりました。 表示はこんな感じで、 こんなHTMLでやりました。 &lt;!DOCTYPE HTML&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css&quot;&gt; &lt;style&gt; #tasks-wrapper { margin: 20px auto; max-width: 500px; } #tasks { } .buttons { margin-right: 5px; } .buttons&gt;button { margin-right: 5px; } &lt;/style&gt; &lt;div id=&quot;tasks-wrapper&quot;&gt; &lt;div class=&quot;input-group&quot;&gt; &lt;input type=&quot;text&quot; id=&quot;task-name&quot; class=&quot;form-control&quot; placeholder=&quot;Task name&quot;&gt; &lt;span class=&quot;input-group-btn&quot;&gt; &lt;button id=&quot;task-post&quot; class=&quot;btn btn-success&quot; type=&quot;button&quot;&gt;登録&lt;/button&gt; &lt;/span&gt; &lt;/div&gt; &lt;hr&gt; &lt;div id=&quot;tasks&quot;&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/react/0.12.2/react.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/react/0.12.2/JSXTransformer.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;//code.jquery.com/jquery-2.1.3.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/app.js&quot; type=&quot;text/jsx&quot;&gt;&lt;/script&gt; JSはこんな。 var Task = React.createClass({ del: function(e) { $.ajax({ type: &quot;DELETE&quot;, url: &quot;/tasks/&quot; + this.props.id, }); }, finish: function(e) { $.ajax({ type: &quot;PUT&quot;, url: &quot;/tasks/&quot; + this.props.id, data: JSON.stringify({finished: 1}), headers: { &quot;Content-Type&quot;: &quot;application/json&quot;, } }); }, render: function() { return (&lt;li className=&quot;list-group-item clearfix&quot;&gt; &lt;div className=&quot;buttons pull-left&quot;&gt; {this.props.finished == &quot;0&quot; ?</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/02/14/make-task-manager-by-using-apigility/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/02/06/learning-vim-again/"><img src="http://yet.unresolved.xyz/images/vim.png" alt="今だからやるvimコマンド再学習"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Fri, Feb 6, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/02/06/learning-vim-again/">今だからやるvimコマンド再学習</a></h1>
        <div class="summary">ちょうど1年ほど前からvimを使ってるんだけど、 例に漏れずオレも使い始めの頃にこのサイトを参考にさせて頂きました。 僕がサクラエディタからVimに乗り換えるまで - give IT a try 2012年公開の記事なんだね、意外と最近。 ずっとずっとやれないで居たんだけど、いずれやろうと思っていたこの記事の一節があります。 そんなこんなで2〜3日ぐらい「Vim縛り」をやっていると、徐々にVim恐怖症は消えてくると思います。 おめでとうございます！これであなたも立派なVimmerです！！・・・と喜ぶのはまだ早いです。 もう一回チートシートを見直してください。 もう一回VimのTutorialをやってみてください。 あれ？Vimにこんなコマンドがあるなんて知らなかったぞ？何か便利そうやん！ と思うようなコマンドをいくつか再発見できるはずです。 ようやく実施出来たのでまた忘れたりしないようにメモっておきたい。 使ってなかったけどこれから使っていきたい思ったvimコマンド g; 前回編集した箇所に飛ぶ。 結構長いソースとか書いてる時、あっちこっち飛んだりするから面倒に感じてた。 行番号覚えたりっていう不毛なことやってたんだけど、今後はこれで済みそう！ &gt;&gt;, &lt;&lt; カーソル行をインデントする。 毎回行頭に戻って・・・ってやってたのが馬鹿らしい・・・。 :e **/Root.pm ワーキングディレクトリ以下からRoot.pmにマッチするファイルを開く。 unite.vimを使ってるからこっちに目がいかなかった。便利そう。 :e **/*Ro ワーキングディレクトリ以下から*Roにマッチするファイルを開く。 さらに便利そう。 gf カーソル位置にある単語と同名のファイル名を開く。 あんまり使わなそうだけど、こんなんあるんだなと感心した。 そういう場面に出くわしても忘れて普通にファイル開いちゃいそうだな・・・。 :wqa 全てのウィンドウを閉じて終了する。 今までは:q連打してたんだけど、よく考えれば普通にダサいよね。 スマートじゃないやり方は大抵何かが間違ってるんだなあと思った。 J カーソル行とその下の行を結合する。 いつも先頭に戻って・・・ってやってた。 0 インデントのさらに行頭へカーソルを移動する。 こんなのも知らないとかまじかよ！って自分でも思ったけどいつも^を使ってたので煩わしかった。 ある程度操作が出来るようになるとそれでまかなってしまうから成長しないね・・・。</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/02/06/learning-vim-again/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/02/05/vim-freezed-in-editting-a-php-file/"><img src="http://yet.unresolved.xyz/images/vim.png" alt="PHPファイルの定数に触るとvimがフリーズする"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Thu, Feb 5, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/02/05/vim-freezed-in-editting-a-php-file/">PHPファイルの定数に触るとvimがフリーズする</a></h1>
        <div class="summary">意外と日が開いたね。 最近はPHPを書いてます。つってもほんと最近からだけど。 そんな最中、さあ書くぞーって時にvimがフリーズしたことがありました。 vimが止まったのは人生初の経験だったので焦りました。 もうほんと困った！ 原因 ほとんどコピペで作った.vimrcのせいで何が悪いのかがわからない・・・。 ていうか未だに書き方がようわからない・・・。 というわけでとりあえず色々消してみて軽くなるパターンを探す方法で行くしかなかった。 原始的最強。 結論を言いますとneocomplcacheの設定が甘かったです。 この設定が原因でした。 let g:neocomplcache_omni_patterns.php = '[^. \t]-&gt;\h\w*\|\h\w*::' Shougoさんのプラグインを適当に使ってたオレが悪かったんです。 実はこの件に関してはShougoさん本人がまとめててくださってました。 vim-jp » Hack #193: neocomplcacheの設定について知る 後編 g:neocomplcache_omni_patternsは、neocomplcacheがオムニ補完の関数を呼び出すためのキーワードパターンを設定します。 主な言語にはデフォルトで対応していますが、RubyやPHPなど重いものは無効化されています。 設定例のようにすれば有効化できますが、Vimがフリーズする可能性もあります。自己責任で使用してください。 つまり原因は定数云々じゃなくself::がパターンに合致したせいで、補完が走り一気に重たくなったと。 いいタイミングだし、0から書き直すかな・・・。 そしてHappy Vim Lifeを&hellip;</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/02/05/vim-freezed-in-editting-a-php-file/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/01/26/ordinary-linux-programming/"><img src="http://yet.unresolved.xyz/images/linux.png" alt="「ふつうのLinuxプログラミング」を読んだ"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Mon, Jan 26, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/01/26/ordinary-linux-programming/">「ふつうのLinuxプログラミング」を読んだ</a></h1>
        <div class="summary">ふつうのLinuxプログラミング Linuxの仕組みから学べるgccプログラミングの王道 読もうと思ったきっかけ Ruby書かないくせにるびまのインタビューの奴が好きで、著者である青木さんの記事を見てた時に知った。 Rubyist Magazine - Rubyist Hotlinks 【第 17 回】 青木峰郎さん Kernelとかいつかは触れたいけど実際どこから入ればいいかわからない、って人、結構いると思うんだよね。 オレもその一人で、この本はなんか、その入り口になるんじゃないかなって期待があった。 実際評判も良かったし。 前提 C言語、書けないんだよね。 高校の頃に書いたっきり、1行も、いや！1文字も書いてない！ 他人のコードを読む場面もなかったわけじゃないけど、ほぼ初心者としてこの本を読みました。 プロトタイプ宣言やらヘッダファイルやらを理解してたくらい。 ちなみに対象読者は、 構造体とポインタくらいはわかる って書いてあるんだけど、「とにかくプログラミング！」な本ではないので、そこまで必要はなさそう。 あ、唯一困ったのはLinkedListを使うところで出てきた-&gt;演算子・・・。 第 11 章 ポインタとリスト構造 この本に書いてあること Linuxの構造と、その上でのC言語っていう2本軸がある。 Linuxについては3つの概念をあげていて、 ファイルシステム プロセス ストリーム これをベースに、Linuxが動いてる仕組みを歴史とか思想をまじえて説明がされてる。 で、それらをC言語で扱う上での作法とか、注意点とか、プログラムを書く上での話に繋がっていくんだけど、 APIの紹介だけじゃなくて、「これはこういう理由で使ってはいけません」って話があるのはすごく良かった。 実際に何か作るときって、大抵どの界隈でも暗黙の了解とかルールがあると思っていて、 そういうのをきちんとした文献で知ることが出来るのは入門者にとってはありがたい事だと思う。 この本を読んで得られたもの まとめは最後に書くとして、読んでる中で納得したところとか課題が解決した点を章立てにしてみる。 Linuxの構造について 本書では一貫して前述した3つの概念をベースに説明しているから、思考がブレずに読みやすい。 また、Linux上でのC言語プログラミング、っていうだけじゃなくて、FHSとか、CPUとメモリについてまでも言及されてる。 Linuxのディレクトリ構成みたいになんとなく理解しちゃうところが説明されてるのは嬉しい。 LinuxでC言語を書くためのノウハウ 言語本ではないからC言語がどうのこうのっていう話はそこまで書いてない。 ただ、API仕様についてはしっかり書いてあるから、実際にプログラムを書くときにまた読み直したいと思った。 あと、プログラムを書くだけじゃなくてその周辺技術(manやgdb)についても述べていて、 どういうタイミングでどういう風に使ったらいいか、っていうノウハウが得られた。 プロセスとは何か プロセスについてはハードウェアと合わせて1つ章が切られていて、結構細かく説明されてる。 個人的にそうなんだって思ったのは、マルチタスクを実現する上でのCPUとメモリの扱いについて。 仮想CPU(初めて聞いた)と仮想メモリの概念とどうやって実現してるかについてはなるほどなと思った。 物理アドレスと論理アドレスっていう物自体は知っていたけど、必要性とかそういう観点で説明されているから理解しやすい。 ビルド周りの話 C言語のビルドについて、 プリプロセス コンパイル アセンブル リンク にわけて説明されてる。 コンパイルとリンクについては知ってたけどそれ以外については知らなかったし、 リンクについてはもう少ししっかり理解したいと思ってたから、この章はその理解に役立った。 スタティックリンクとダイナミックリンクの説明と、どちらを使うべきか、っていう話も載ってる。 シグナルについて プロセスを殺すとかは普段からやるけど、それをプログラム側で見た場合の話がされてる。 シグナルを送信する側の実装とか、受ける上での実装とか、さらに注意点までまとめられてるのは良かった。 ちなみに関数ポインタの存在はここで初めて知った。</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/01/26/ordinary-linux-programming/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/01/25/using-display-zoom-in-mac/"><img src="http://yet.unresolved.xyz/images/osx.png" alt="Macで画面の一部をズームする"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Sun, Jan 25, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/01/25/using-display-zoom-in-mac/">Macで画面の一部をズームする</a></h1>
        <div class="summary">Macを操作しながらプレゼンする人って、たまに画面の一部だけをズームしたりするよね。 あれどうやるのか気になってたんだけど、標準の機能で出来るっぽい。 設定画面から、 でこれ。 コントロールキー押しながらスクロールするとズームする！ Macのショートカットキーの表記が未だに慣れない。</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/01/25/using-display-zoom-in-mac/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/01/25/play-slack-api/"><img src="http://yet.unresolved.xyz/images/slack.png" alt="SlackAPIで遊ぶ"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Sun, Jan 25, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/01/25/play-slack-api/">SlackAPIで遊ぶ</a></h1>
        <div class="summary">最近 ふつうのLinuxプログラミングを読んでます。知りたいことが書かれてて楽しい！ でもずっと本読むのは飽きるよね。なのでSlackのAPIとか触ってみる。 SlackAPIの種類 SlackのAPIはいくつか種類があるんだね、トリガになるパターンが違うのかな？ 2015年01月24日時点でのAPIをまとめてみる。 Slack Web API 指定したチャンネルの履歴とかユーザの一覧とか、Slackの情報を取得出来る。 Web APIなので、URLベースでの取得。 Real Time Messaging API Web Socketベースのリアルタイムチャット機能を提供する？ bot userがどうのこうのっていうのがよくわからない。 Slackbot Remote Control SlackBotに喋らせたり出来る。ちょうかわいい。 Incoming Webhooks 指定したチャンネルに投稿出来る。 Outgoing Webhooks 指定した単語に応じて指定したURLを叩ける。 Slash Commands 指定したスラッシュで始まる単語に応じてURLを叩けて、レスポンスがそのまま投稿される。 今回は発言のタイミングで発火するSlash Commandsを使ってみようかな！ スラッシュコマンドの追加 ここから新しくコマンドの追加が出来る。 https://my.slack.com/services/new/slash-commands herokuでさくっとHello World作って試してみようかな。 おお、出るじゃん！でもOnly you can see this messageって出てる、オレしか見れないんだね。 REPLを作ろう なんかSlack上でプログラム打つと実行結果が返ってくるみたいなやつ誰かが作ってたよね？ あれ調べても出ないんだけどなんでなんだろう。 まあとりあえず、作ったばっかのpaiza.IOのAPIを叩くあれを導入してみる。 paiza.ioのAPIを使ってreplを作る | Unresolved スラッシュコマンドAPIは/command argsって感じにやると、指定したURLにtextってパラメータ名でargsが飛ばされるみたい。 なので/repl ruby:p &quot;hello&quot;って感じで実行できるようにしようかな。 別にURL出してもいいんだけど・・・。 compojureのルーティングはこんな。 (defroutes app-routes (GET &quot;/&quot; [text] (if (empty? text) &quot;Invalid input.&quot;</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/01/25/play-slack-api/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    
    <article class="post">
    <div class="eyecatch">
        
        <a href="http://yet.unresolved.xyz/blog/2015/01/25/make-repl-using-the-paizaio/"><img src="http://yet.unresolved.xyz/images/paizaio.png" alt="paiza.IOのAPIを使ってreplを作る"></a>
        
    </div>
    <div class="data">
        <span class="post-date">Sun, Jan 25, 2015</span>
        <h1 class="post-title"><a href="http://yet.unresolved.xyz/blog/2015/01/25/make-repl-using-the-paizaio/">paiza.IOのAPIを使ってreplを作る</a></h1>
        <div class="summary">paizaが面白いAPIを公開してたから、そのうち使ってみたいと思ってたんだよね。 ブラウザでプログラミング・実行ができる「オンライン実行環境」| paiza.IO ちょっとSlackAPIで使ってみたいからこの機会に軽くだけ触ってみる。 何が出来る？ たくさんの言語のREPLが使える！すごい！ ただ、コンパイル言語はそんな気軽に使える感じではないみたい。 例えばJavaで言えば、System.out.println(&quot;Hello&quot;);だけじゃなくてクラス定義から含めなきゃいけないみたいに。 どうやって使う？ どうやらSwaggerっていうOSSを使ってるみたい。 paiza.IO上でのデモも使える。 Swagger UI なんか動かないなと思ったらhttpsでhttpのリソースを参照してたみたいで、ブロックされてた。 Mixed Content: The page at 'https://api.paiza.io/docs/swagger/#!/runners/' was loaded over HTTPS, but requested an insecure XMLHttpRequest endpoint 'http://api.paiza.io/docs/swagger-docs/runners.json?api_key=guest'. This request has been blocked; the content must be served over HTTPS. 評価パターンは3つあるみたい。 runners/create コードの実行が出来る。 レスポンスにidとstatusが返ってきて、このidを使って実行結果とかを見る。 runners/get_status 実行結果を見ることが出来る。 completedとかそういうレベル。 runners/get_details 実行結果として出力された値とかを見ることが出来る。 runners/createで実行してrunners/get_detailsで結果を見る感じ。 Clojureから叩こう 使い方はわかったしURL叩けば済む話だしさっさと作っちゃう。 HTTPアクセスはJavaのクラスを使おうかなと思ったけど、dakrone/clj-httpっていうすごく優秀！なライブラリがあったのでこれを使います。 まずrunners/createを実行するところ。 (defn repl [language source] (let [run-id (-&gt; (httpc/post &quot;http://api.paiza.io/runners/create&quot; {:form-params {:source_code source :language</div>
    </div>
    <footer class="readon">
        <a href="http://yet.unresolved.xyz/blog/2015/01/25/make-repl-using-the-paizaio/">
            <i class="fa fa-chevron-down"></i>
        </a>
    </footer>
</article>
<hr>

    
    
    <div class="all-entries">
        <a href="http://yet.unresolved.xyz/post">All Entries</a>
    </div>
</div>


    </div>
</div>

<div class="container footer-ad">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-4218045898905176"
         data-ad-slot="4750057642"
         data-ad-format="auto"></ins>
    <script>
(adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>


<aside class="sidebar-wrapper">
    <div class="container">
        
        <div class="tags tag-cloud">
            <h2>Tags</h2>
            <ul class="post-tags">
                
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/ansible">
                        ansible
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/apigility">
                        apigility
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/auriga">
                        auriga
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/aws">
                        aws
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/beanstalk">
                        beanstalk
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/book">
                        book
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/boot2docker">
                        boot2docker
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/centos">
                        centos
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/clang">
                        clang
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/clojure">
                        clojure
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/css">
                        css
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/database">
                        database
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/design">
                        design
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/dns">
                        dns
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/docker">
                        docker
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/enlive">
                        enlive
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/git">
                        git
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/github">
                        github
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/golang">
                        golang
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/google-app-engine">
                        google-app-engine
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/gravatar">
                        gravatar
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/hackathon">
                        hackathon
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/heroku">
                        heroku
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/hiccup">
                        hiccup
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/html">
                        html
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/hugo">
                        hugo
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/javascript">
                        javascript
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/jekyll">
                        jekyll
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/laravel">
                        laravel
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/leiningen">
                        leiningen
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/linux">
                        linux
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/lobos">
                        lobos
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/mac">
                        mac
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/migration">
                        migration
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/node.js">
                        node.js
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/octopress">
                        octopress
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/os-x">
                        os-x
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/paiza">
                        paiza
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/paizaio">
                        paizaio
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/php">
                        php
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/postgresql">
                        postgresql
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/python">
                        python
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/reactjs">
                        reactjs
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/ruby">
                        ruby
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/sass">
                        sass
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/scss">
                        scss
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/slack">
                        slack
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/sql-server">
                        sql-server
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/sqlite">
                        sqlite
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/startup">
                        startup
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/startup-weekend">
                        startup-weekend
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/ubuntu">
                        ubuntu
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/util">
                        util
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/vagrant">
                        vagrant
                    </a>
                </li>
                
                <li>
                    
                    <a href="http://yet.unresolved.xyz/tags/vim">
                        vim
                    </a>
                </li>
                
            </ul>
        </div>
        
        
        <div id="profile">
            <div class="eyecatch">
                <img id="photo" src="/images/nopicture.png" alt="profile">
            </div>
            <div class="data">
                
                <span class="post-date">Sun, Feb 26, 1989</span>
                
                <h1 id="username" class="post-title"></h1>
                
                <a href="https://www.facebook.com/daisuke.tsuji.735" target="_blank"><i class="fa fa-facebook-square"></i></a>
                
                
                <a href="https://twitter.com/dim0627" target="_blank"><i class="fa fa-twitter-square"></i></a>
                
                
                <a href="https://github.com/dim0627" target="_blank"><i class="fa fa-github-square"></i></a>
                
                <pre id="description"></pre>
                <ul id="urls" class="post-tags"></ul>
            </div>
        </div>
        
    </div>
</aside>



<footer class="copy">
    <p>&copy; 2015  Daisuke Tsuji </p>
    <p>Powered by <a href="http://gohugo.io" target="_blank">Hugo</a>, Theme <a href="https://github.com/dim0627/hugo_theme_aglaus" target="_blank">Aglaus</a> designed by <a href="http://yet.unresolved.xyz" target="_blank">Daisuke Tsuji</a></p>
</footer>

<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script src="http://yet.unresolved.xyz/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-55005303-1', 'auto');
ga('send', 'pageview');

</script>


<script>
$(function() {
    var url = "https://ja.gravatar.com/1e092e9f2cda827deb8623be2e846936.json?callback=?";
    $.getJSON(url)
        .done(function(data) {
            var entry = data.entry[0];
            $("#photo").attr("src", entry.photos[0].value);
            $("#username").html(entry.name.familyName + " " + entry.name.givenName);
            $("#description").html(entry.aboutMe);
            entry.urls.forEach(function(el){
                $("#urls").append($("<li><a href='" + el.value + "'>" + el.title + "</a></li>"));
            });
            $("#profile").show();
        });
});
</script>

